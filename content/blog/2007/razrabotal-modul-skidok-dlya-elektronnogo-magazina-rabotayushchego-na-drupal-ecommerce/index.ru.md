---
title: "Модуль скидок для электронного магазина работающего на Drupal + eCommerce"
date: 2007-10-05 19:05:27 +0400
draft: false
tags: [old-site, drupal-5, Работа, Drupal 5.2, eCommerce, Total discount]
---
## Задача

Есть интернет-магазин, работающий на движке [Drupal 5.2](http://drupal.org) + [eCommerce](http://drupal.org/project/ecommerce), необходимо сделать возможность задавать для пользователей скидки, зависящие от роли пользователя и от стоимости всех товаров в его тележке.
<!--more-->

## Решение

Для решения задачи мною был разработан модуль {{< resource "*total_discount*" "Total discount" >}}. Его необходимо скачать, распаковать в папку `/modules/ecommerce/contrib`, активировать в меню "Администрирование – Модули" (`admin/build/modules`). Далее в меню "Total discount settings" надо создать для каждой роли таблицы скидок вида:
```
цена1 скидка1
цена2 скидка2
цена3 скидка3
```

Например:

```0 0
100 5
500 10
2000 15
```

То есть если стоимость товаров в тележке покупателя больше 100 рублей, но меньше 500, то он получит скидку 5%, если стоимость товаров больше 500, но меньше 2000 рублей, то скидка будет равна 10% и если стоимость товаров будет больше 2000, то скидка будет равна 15%.

Скачать модуль можно {{< resource "*total_discount*" "здесь" >}}.