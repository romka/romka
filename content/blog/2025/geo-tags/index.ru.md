---
date: 2025-04-15 17:59:00 +0100
draft: true
telegram: false
tags: [AirTag, геотег, LoRaWAN, rfid, NFC]
---
По мотивам [истории об угнанном велосипеде](https://romka.eu/blog/2025/bicycle-theft/) я решил поизучать какие есть решения для помощи в поиске украденных вещей. У AirTag, который помог найти велосипед, есть один существенный недостаток -- функция защиты от нежелательного отслеживания (unwanted tracking protection). Эта функция предусмотрена для того, чтобы нельзя было незаметно подбросить метку другому человеку и следить за ним. Благодаря ей, сколько-нибудь подготовленный вор, с помощью стандартного встроенного в ОС софта, легко узнает, что к велосипеду прикреплён AirTag или другая совместимая гео-метка.

Поэтому я бы хотел найти такую гео-метку, которая обладала бы следующими свойствами (в порядке убывания важности):
- не детектится программами типа FindMy,
- имеет широкую сеть покрытия. То есть украденную вещь можно обнаружить даже если её увезли в другой город или страну. Последнее актуально для Германии, так как здесь украденные велики часто переправляют в Польшу,
- имеет долгий срок работы от батарейки, хотя бы 10-12 месяцев,
- работает по принципу: купил, установил и забыл. Никаких платных подписок, дорогостоящего или трудоёмкого обслуживания и так далее.

В итоге, я пришел к тому, что есть четыре типа устройств, о которых я расскажу ниже. Если коротко, то, к сожалению, ничего лучше AirTag, со всеми его недостатками, на рынке сейчас нет.

Итак, четыре типа устройств:
1. RFID/NFC метки,
2. Bluetooth-устройства -- AirTag и совместимые с ними гео-метки от других производителей, а также несовместимые устройства того же типа,
3. GSM/GPS трекеры,
4. LPWAN устройства.

Суть всех вариантов кроме третьего заключается в том, что есть два типа устройств: гео-метка и ридер (считыватель).

Гео-метка прикрепляется к отслеживаемому объекту, а ридер может находить метки находящиеся неподалёку. Чем сильнее сигнал от гео-метки, тем дальше может находиться ридер чтобы её найти, но и тем больше требуется энергии для работы метки. Как следствие -- тем больше нужна батарейка или тем чаще придётся её менять. 

В зависимости от типа метки, ридером может выступать или специализированное устройство, или обычный телефон. Ридер знает свои координаты и по мощности сигнала от метки может определить примерное расстояние до неё и направление к ней.

Для работы системы нужен не один ридер, а целая сеть устройств, которые должны покрывать максимально большую площадь. Чем больше сеть, тем выше шансы найти украденную вещь. Сеть может быть построена энтузиастами или коммерческой компанией. Как обычно, опен-сорсные решения могут иметь плохую поддержку, в данном случае покрытие сети, а коммерческие -- могут быть не бесплатными.

Таким образом, выбор устройства -- это поиск компромисса между:
- размером и энергоэффективностью меток,
- сложностью и стоимостью обслуживания меток и ридеров,
- размером и надёжностью сети ридеров.

{{< more >}}
<!--more-->

## Rfid и Nfc устройства
Этот тип устройств я упомянул только для информации. Для поиска угнанного велосипеда они совершенно бесполезны. Основной недостаток устройств этого типа в том, что метки здесь **пассивны** -- они не передают сигнал самостоятельно, и могут быть обнаружены, если кто-то целенаправленно ищет их ридером.

Метка здесь может выглядеть как маленькая наклейка и единственным несомненным плюсом системы является то, что метки **полностью энергонезависимы** -- их не нужно подзаряжать или менять в них батарейки.

**RFID (Radio Frequency Identification)** используется для идентификации объектов, например на складах. Радиус действия пассивной метки -- **до 10 метров**. Она не может быть считана обычным телефоном, нужен специальный ридер. Поэтому не получится легко и дешево построить сеть устройств для поиска украденных вещей.   

**NFC (Near Field Communication)** -- это подмножество RFID. NFC метки могут читаться обычными телефонами, но радиус действия таких меток -- **не больше метра**. То есть эти девайсы подходят, например, для поиска потерянных в квартире ключей, но не для поиска велосипеда переправленного в Краков.

## Bluetooth-устройства
Это класс устройств, в который попадают ЭйрТеги, Chipolo POP, Pebblebee и куча других китайских девайсов. Для работы таких меток нужна сеть телефонов, на которых запущена специальная программа. Эта программа постоянно работает в фоне, принимает и обрабатывает сигналы от меток. В системах Apple, Google и Samsung эта функция активна по умолчанию и не может быть полностью отключена. Сети устройств этих компаний несовместимы друг с другом, то есть метка от Гугла не будет найдена устройством от Эппл и наоборот, однако существуют устройства от сторонних производителей, которые могут быть совместимы с несколькими разными сетями. Но даже с такими метками, придётся выбрать только одну сеть, к которой метка присоединится.

Метки этого типа не умеют определять свои координаты по GPS и передавать их владельцу. Логика работы системы следующая:
1. каждая гео-метка -- это Bluetooth-устройство имеющее уникальный идентификатор,
2. при активации метки её идентификатор привязывается к аккаунту пользователя, активировавшего метку,
3. активная метка время от времени отправляет по Bluetooth широковещательный сигнал со своим идентификатором. Телефоны,  находящиеся в радиусе действия метки, могут поймать этот сигнал. В открытом пространстве, телефон может поймать сигнал от метки с расстояния в **30-50 метров**, в помещениях -- с расстояния **до 20 метров**,
4. получив идентификатор от гео-метки, телефон передаёт его на сервер, отвечающий за работу сети. Помимо идентификатора метки на сервер передаются координаты места, где метка была обнаружена,
5. сервер, получив координаты метки передаёт их владельцу метки.

В случае если владелец метки со своим телефоном попадает в радиус её действия, он может активировать звуковой сигнал на метке или функцию "Найти поблизости". Эта функция по мощности Bluetooth-сигнала от метки сможет определить примерное расстояние до неё, а также, при движении, подсказать приближается ли владелец к метке или отдаляется.

Метки работают от заменяемой батарейки, которой хватает на **10-12 месяцев работы**. Размер устройства относительно небольшой и такую метку можно легко и относительно скрытно установить на велосипед: под седло, внутрь передней вилки и т.п. 

Если бы не упомянутая выше unwanted tracking protection, это было бы идеальное устройство.

## GSM/GPS трекеры
GSM/GPS трекеры -- это технически самый сложный тип устройств из всех рассмотренных ранее и, как следствие, самый дорогой и сложный в обслуживании. Этим устройствам не нужны ридеры. Каждый такой трекер -- это миниатюрный компьютер с GPS-приёмником, GSM-модулем и SIM-картой. Этот комбайн сам может обнаружить свои координаты, ему не нужна армия устройств вокруг. Он сам может выйти в интернет и передать свои координаты на сервер, откуда он будет перенаправлен владельцу. Если бы он ещё умел бить угонщика током — был бы идеальный гаджет.

К сожалению, у устройств этого типа есть ряд фатальных недостатков, которые делают их неприемлемыми для меня:
1. дорогие,
2. громоздкие и сложные в установке,
3. очень малый срок работы от батарейки, их буквально нужно заряжать каждые **пару недель**,
4. требуют оплаты симки,
5. обычно, требуют платную подписку на сервис, обслуживающий сообщения от устройств.

В итоге, всё это вместе может стоить сильно дороже страховки на велосипед. Наверное, этот класс устройств подойдет для защиты самых дорогих велосипедов.

## LPWAN устройства
Ну и, наконец, самый интересный и гиковский тип устройств -- LPWAN. Эта аббревиатура расшифровывается как Long Range Wide Area Network и означает "энергоэффективная сеть дальнего радиуса действия". Существует несколько независимых друг от друга реализаций этой технологии, одна из них -- LoRaWAN. 

По принципу своей работы эти устройства очень похожи на то как работают Bluetooth-девайсы. Здесь тоже есть гео-метки и ридеры, только LoRaWAN использует  

Т специально спроектирована для передачи телеметрии